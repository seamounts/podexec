### PodExec

该项目实现了纳管集群远程登陆的部分功能，目前已弃用，主要是做技术验证用的。此代码比较简单，主要为了展示 golang 面向接口编程的一种思想。

##### 架构
```
                                  +--------------------------+              +----------------------------+
                                  |interface                 |              |implement                   |
                       websocket  |                          |   implement  |                            |
+-------------------+  read/write |   +-------------------+  |   interface  |  +---------------------+   |
|   web terminal    |<------------+-->|    wsconnecter    |<-+--------------+--|   WebSocket Conn    |   |
+-------------------+             |   +-------------------+  |              |  +---------------------+   |
                                  |             ^            |              |             ^              |
                                  |      read/write msg      |              |             |              |
                                  |             |            |              |             |              |
                                  |             v            |              |             v              |
                                  |   +-------------------+  |  implement   |  +---------------------+   |
                                  |   |    PtyHandler     |<-+--interface---+--|    SocketStream     |   |
                                  |   +-------------------+  |              |  +---------------------+   |
                                  |             ^            |              |             ^              |
                                  |      read/write msg      |              |             |              |
                                  |             |            |              |             |              |
                                  |             v            |              |             v              |
+-------------------+  login pod  |   +-------------------+  |              |  +---------------------+   |
|        pod        |<-stream io--+-->|  RemoteExecutor   |<-+---implement--+--|DefaultRemoteExecutor|   |
+-------------------+             |   +-------------------+  |   interface  |  +---------------------+   |
                                  |                          |              |                            |
                                  +--------------------------+              +----------------------------+
```

如图，前端通过 websocket 协议和服务建立一个双向的连接，服务通过 `wsconnecter` 层获维护和前端的数据流，`wsconnecter`接口定义了底层网络的数据读取和写入方法；`PtyHandler` 通过 `wsconnecter` 获取的数据和 `RemoteExecutor` 层交互，`PtyHandler`接口定义了数据流的读取、写入和终端窗口调整等基本方法；`RemoteExecutor` 接口定义了连接远程容器的方法。

按照功能将代码抽象为不同的模块，每个层通过接口定义所拥有的能力，模块层之间也通过接口为纽带进行数据交换。这样设计的好处就是减少了代码的耦合，提高了代码的扩展性，对于每一层的改动不影响其他的层的逻辑，而且更易于编写单元测试，单元测试可以分层编写，且可以通过接口将依赖的下层资源 mock 化。
